name: aacautoupdate # you probably want to 'snapcraft register <name>'
title: Adopt-a-Cell Auto Updater
base: core18 # the base snap is the execution environment for this snap
version: 'snappy'
adopt-info: aacautoupdate
  
license: MIT
type: app

icon: icons/icon.svg

architectures:
  - build-on: amd64
    run-on: amd64
  
  - build-on: i386
    run-on: i386
    #build-error: ignore

  - build-on: armhf
    run-on: armhf
    #build-error: ignore

  - build-on: arm64
    run-on: arm64


grade: devel # must be 'stable' to release into candidate/stable channels
confinement: strict # use 'strict' once you have the right plugs and slots

# We're going to try to bind the 'data' directory of the website into the snap.
layout:
  /var/www/cell.bdavidson.dev/html/data:
    bind: $SNAP_DATA/var/www/cell.bdavidson.dev/html/data

apps:
  aacautoupdate:
    command: aacautoupdate -cleanrun
    daemon: simple
    restart-condition: on-failure

parts:
  aacautoupdate:
    parse-info: [aacautoupdate.metainfo.xml]
    source: .
    plugin: go
    go-channel: 1.12/stable
    go-importpath: github.com/iAmSomeone2/aacautoupdate
    build-packages:
      - gcc
